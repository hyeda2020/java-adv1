# 10. 스레드 풀과 Executor 프레임워크
- Executor 프레임워크 : 자바의 Executor 프레임워크는 멀티스레딩 및 병렬 처리를 쉽게 사용할 수 있도록 돕는 기능의 모음
  

- Executor 프레임워크의 주요 구성 요소
  - Executor 인터페이스
    ```
    package java.util.concurrent;
    public interface Executor {
        void execute(Runnable command);
    }    
    ```
  - ExecutorService 인터페이스 - 주요 메서드
    ```
    public interface ExecutorService extends Executor, AutoCloseable {
        <T> Future<T> submit(Callable<T> task);
      
        @Override
        default void close(){...}
        ...
    }
    ```

- ExecutorService 사용 예제
  ```
  // RunnableTask
  public class RunnableTask implements Runnable {
      ...
      private int sleepMs = 1000;
      ...
      @Override
      public void run() {
          sleep(sleepMs); // 작업 시간 시뮬레이션
      }
  }
  
  // ExecutorService
  public class ExecutorBasicMain {
      public static void main(String[] args) throws InterruptedException {
          // ExecutorService 의 가장 대표적인 구현체는 ThreadPoolExecutor
          ExecutorService es = new ThreadPoolExecutor(
             2, // corePoolSize
             2, // maximumPoolSize
             0, // keepAliveTime
             TimeUnit.MILLISECONDS, // TimeUnit(keepAliveTime 시간 단위)
             new LinkedBlockingQueue<>() // BlockingQueue 구현체
          );
  
          es.execute(new RunnableTask("taskA"));
          es.execute(new RunnableTask("taskB"));
          es.execute(new RunnableTask("taskC"));
          es.execute(new RunnableTask("taskD"));
          es.close();
      }
  }
  ```
    
  - ThreadPoolExecutor(ExecutorService) 구성요소
    1. 스레드 풀 : 스레드 관리
    2. `BlockingQueue` : 작업을 보관
  - `ThreadPoolExecutor` 생성자 파라미터
    1. `corePoolSize` : 스레드 풀에서 관리되는 기본 스레드의 수
    2. `maximumPoolSize` : 스레드 풀에서 관리되는 최대 스레드 수
    3. `keepAliveTime`, `TimeUnit unit` : 기본 스레드 수를 초과해서 만들어진 스레드가 생존할 수 있는 대기 시간.  
       이 시간 동안 처리할 작업이 없다면 초과 스레드는 제거됨.
    4. `BlockingQueue` workQueue : 작업을 보관할 블로킹 큐
  

- 동작 방식 예시