# 6. 생산자 소비자 문제 1  
- 기본 개념  
  - 생산자(Producer) : 데이터를 생성하는 역할  
  - 소비자(Consumer) : 생성된 데이터를 사용하는 역할  
  - 버퍼(Buffer) : 생산자가 생성한 데이터를 일시적으로 저장하는 한정된 크기의 공간(임계 영역)  
  <img width="876" height="335" alt="스크린샷 2025-12-02 230902" src="https://github.com/user-attachments/assets/258e6df1-8b80-4270-b60e-f832fe24c9c9" />
  
- 문제 상황  
  - 생산자가 너무 빠를 때 : 버퍼에 생산한 데이터를 저장하고, 버퍼가 가득 차 있으면 빈 공간이 생길 때까지 기다림.  
  - 소비자가 너무 빠를 때 : 버퍼에 저장된 데이터를 소비하고, 버퍼가 비어있으면 새로운 데이터가 저장될 때까지 기다림.  
  
- 한정된 버퍼 크기 문제 케이스  
  - 소비자 스레드들이 먼저 종료되어 데이터를 소비할 스레드가 없어,  
    버퍼(queue)에 데이터가 가득 차버리고, 남은 생산자가 새로 생성된 데이터는 버려짐.  
  <img width="879" height="509" alt="스크린샷 2025-12-02 230933" src="https://github.com/user-attachments/assets/c2a8c0fc-4c74-4ebe-a864-e8c884edfc47" />

  - 생산자 스레드들이 먼저 종료되어 데이터를 생산할 스레드가 없어,  
    버퍼(queue)가 비어버리므로 남은 소비자가 데이터를 받을 수 없음.
  <img width="851" height="475" alt="스크린샷 2025-12-02 230950" src="https://github.com/user-attachments/assets/73808595-a20f-4575-94fd-eb873b9871d7" />
  
  
- `sleep()` 을 이용하여 생산자/소비자가 기다릴 경우 문제 케이스  
  - 버퍼가 가득 차버린 상황에서 락을 가진 생산자는 버퍼에 자리가 남기만을 계속 기다리지만,  
  데이터를 소비할 소비자는 락이 없어 BLOCKED 상태가 되기 때문에 데드락 발생.  
  <img width="903" height="523" alt="스크린샷 2025-12-02 232050" src="https://github.com/user-attachments/assets/7a34a44a-a2f1-4c06-a84a-7e7a62bd5355" />
  <img width="890" height="578" alt="스크린샷 2025-12-02 232129" src="https://github.com/user-attachments/assets/4e14f8cd-3e4e-4d3a-9f5e-cb0dc8aa56fe" />


  - 버퍼가 비어 있는 상황에서 소비자는 락을 들고 버퍼에 데이터가 저장되기를 계속 기다리지만,  
  생산자는 락이 없어 BLOCKED 상태가 되기 때문에 데드락 발생.  
  <img width="882" height="370" alt="스크린샷 2025-12-02 232139" src="https://github.com/user-attachments/assets/f6f49b94-fe62-4c20-a4fd-4afaca8f20fe" />
  <img width="925" height="473" alt="스크린샷 2025-12-02 232601" src="https://github.com/user-attachments/assets/bed2aa08-627e-4ebe-92eb-81a352dab364" />

  
